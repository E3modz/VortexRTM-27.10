using E3Modz.Login___Home;
using System;
using System.Net.Sockets;
using System.Windows.Forms;

namespace E3Modz
{
    public partial class PS3Exploit : Form
    {
        public PS3Exploit()
        {
            InitializeComponent();
        }

        private void Button1_Click(object sender, EventArgs e)
        {
            this.webBrowser1.Url = new Uri("http://" + this.IPText.Text + "/restart.ps3", UriKind.Absolute);
            this.webBrowser1.Refresh();
        }

        private void Button4_Click(object sender, EventArgs e)
        {
            this.webBrowser1.Url = new Uri("http://" + this.IPText.Text + "/");
        }

        private void Button5_Click(object sender, EventArgs e)
        {
            string host = this.IPText.Text;
            for (int port = 20; port < 21; port++)
                using (var tcp = new TcpClient())
                {
                    var ar = tcp.BeginConnect(host, port, null, null);
                    using (ar.AsyncWaitHandle)
                    {

                        if (ar.AsyncWaitHandle.WaitOne(2000, false))
                        {
                            try
                            {
                                this.IPText.Text = "Ports: Open";
                                MessageBox.Show("Open! Connect To PS3 and Have Funnnn :D");

                            }
                            catch
                            {
                                this.IPText.Text = "Ports: Open";
                                MessageBox.Show("Open! Connect To PS3 and Have Funnnn :D");

                            }
                        }
                        else
                        {
                            this.IPText.Text = "Ports: Closed";

                        }
                    }
                }
        }

        private void Button2_Click(object sender, EventArgs e)
        {
            MessageBox.Show("Soon! :)", "Information");
        }

        private void Button160_Click(object sender, EventArgs e)
        {
            this.webBrowser1.Url = new Uri("http://" + this.IPText.Text + "/shutdown.ps3", UriKind.Absolute);
            this.webBrowser1.Refresh();
        }

        private void Button35_Click(object sender, EventArgs e)
        {
            Dashboard h = new Dashboard();
            h.Show();
            this.Hide();
        }
    }
}
